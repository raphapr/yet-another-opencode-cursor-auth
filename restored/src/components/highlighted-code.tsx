__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => {
  try {
    /* harmony export */__webpack_require__.d(__webpack_exports__, {
      /* harmony export */A: () => __WEBPACK_DEFAULT_EXPORT__,
      /* harmony export */d: () => (/* binding */HighlightedCode)
      /* harmony export */
    });
    /* harmony import */
    var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("../../node_modules/.pnpm/react@19.1.0/node_modules/react/jsx-runtime.js");
    /* harmony import */
    var _anysphere_ink__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("../ink/build/index.js");
    /* harmony import */
    var _anysphere_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("../utils/dist/index.js");
    /* harmony import */
    var _shikijs_langs_bash__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__("../../node_modules/.pnpm/@shikijs+langs@3.9.2/node_modules/@shikijs/langs/dist/shellscript.mjs");
    /* harmony import */
    var _shikijs_langs_c__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__("../../node_modules/.pnpm/@shikijs+langs@3.9.2/node_modules/@shikijs/langs/dist/c.mjs");
    /* harmony import */
    var _shikijs_langs_cpp__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__("../../node_modules/.pnpm/@shikijs+langs@3.9.2/node_modules/@shikijs/langs/dist/cpp.mjs");
    /* harmony import */
    var _shikijs_langs_csharp__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__("../../node_modules/.pnpm/@shikijs+langs@3.9.2/node_modules/@shikijs/langs/dist/csharp.mjs");
    /* harmony import */
    var _shikijs_langs_css__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__("../../node_modules/.pnpm/@shikijs+langs@3.9.2/node_modules/@shikijs/langs/dist/css.mjs");
    /* harmony import */
    var _shikijs_langs_dart__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__("../../node_modules/.pnpm/@shikijs+langs@3.9.2/node_modules/@shikijs/langs/dist/dart.mjs");
    /* harmony import */
    var _shikijs_langs_dockerfile__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__("../../node_modules/.pnpm/@shikijs+langs@3.9.2/node_modules/@shikijs/langs/dist/docker.mjs");
    /* harmony import */
    var _shikijs_langs_go__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__("../../node_modules/.pnpm/@shikijs+langs@3.9.2/node_modules/@shikijs/langs/dist/go.mjs");
    /* harmony import */
    var _shikijs_langs_html__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__("../../node_modules/.pnpm/@shikijs+langs@3.9.2/node_modules/@shikijs/langs/dist/html.mjs");
    /* harmony import */
    var _shikijs_langs_ini__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__("../../node_modules/.pnpm/@shikijs+langs@3.9.2/node_modules/@shikijs/langs/dist/ini.mjs");
    /* harmony import */
    var _shikijs_langs_java__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__("../../node_modules/.pnpm/@shikijs+langs@3.9.2/node_modules/@shikijs/langs/dist/java.mjs");
    /* harmony import */
    var _shikijs_langs_javascript__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__("../../node_modules/.pnpm/@shikijs+langs@3.9.2/node_modules/@shikijs/langs/dist/javascript.mjs");
    /* harmony import */
    var _shikijs_langs_json__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__("../../node_modules/.pnpm/@shikijs+langs@3.9.2/node_modules/@shikijs/langs/dist/json.mjs");
    /* harmony import */
    var _shikijs_langs_jsx__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__("../../node_modules/.pnpm/@shikijs+langs@3.9.2/node_modules/@shikijs/langs/dist/jsx.mjs");
    /* harmony import */
    var _shikijs_langs_kotlin__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__("../../node_modules/.pnpm/@shikijs+langs@3.9.2/node_modules/@shikijs/langs/dist/kotlin.mjs");
    /* harmony import */
    var _shikijs_langs_less__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__("../../node_modules/.pnpm/@shikijs+langs@3.9.2/node_modules/@shikijs/langs/dist/less.mjs");
    /* harmony import */
    var _shikijs_langs_lua__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__("../../node_modules/.pnpm/@shikijs+langs@3.9.2/node_modules/@shikijs/langs/dist/lua.mjs");
    /* harmony import */
    var _shikijs_langs_makefile__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__("../../node_modules/.pnpm/@shikijs+langs@3.9.2/node_modules/@shikijs/langs/dist/make.mjs");
    /* harmony import */
    var _shikijs_langs_markdown__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__("../../node_modules/.pnpm/@shikijs+langs@3.9.2/node_modules/@shikijs/langs/dist/markdown.mjs");
    /* harmony import */
    var _shikijs_langs_php__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__("../../node_modules/.pnpm/@shikijs+langs@3.9.2/node_modules/@shikijs/langs/dist/php.mjs");
    /* harmony import */
    var _shikijs_langs_powershell__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__("../../node_modules/.pnpm/@shikijs+langs@3.9.2/node_modules/@shikijs/langs/dist/powershell.mjs");
    /* harmony import */
    var _shikijs_langs_python__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__("../../node_modules/.pnpm/@shikijs+langs@3.9.2/node_modules/@shikijs/langs/dist/python.mjs");
    /* harmony import */
    var _shikijs_langs_r__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__("../../node_modules/.pnpm/@shikijs+langs@3.9.2/node_modules/@shikijs/langs/dist/r.mjs");
    /* harmony import */
    var _shikijs_langs_ruby__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__("../../node_modules/.pnpm/@shikijs+langs@3.9.2/node_modules/@shikijs/langs/dist/ruby.mjs");
    /* harmony import */
    var _shikijs_langs_rust__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__("../../node_modules/.pnpm/@shikijs+langs@3.9.2/node_modules/@shikijs/langs/dist/rust.mjs");
    /* harmony import */
    var _shikijs_langs_scss__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__("../../node_modules/.pnpm/@shikijs+langs@3.9.2/node_modules/@shikijs/langs/dist/scss.mjs");
    /* harmony import */
    var _shikijs_langs_sql__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__("../../node_modules/.pnpm/@shikijs+langs@3.9.2/node_modules/@shikijs/langs/dist/sql.mjs");
    /* harmony import */
    var _shikijs_langs_swift__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__("../../node_modules/.pnpm/@shikijs+langs@3.9.2/node_modules/@shikijs/langs/dist/swift.mjs");
    /* harmony import */
    var _shikijs_langs_toml__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__("../../node_modules/.pnpm/@shikijs+langs@3.9.2/node_modules/@shikijs/langs/dist/toml.mjs");
    /* harmony import */
    var _shikijs_langs_tsx__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__("../../node_modules/.pnpm/@shikijs+langs@3.9.2/node_modules/@shikijs/langs/dist/tsx.mjs");
    /* harmony import */
    var _shikijs_langs_typescript__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__("../../node_modules/.pnpm/@shikijs+langs@3.9.2/node_modules/@shikijs/langs/dist/typescript.mjs");
    /* harmony import */
    var _shikijs_langs_xml__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__("../../node_modules/.pnpm/@shikijs+langs@3.9.2/node_modules/@shikijs/langs/dist/xml.mjs");
    /* harmony import */
    var _shikijs_langs_yaml__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__("../../node_modules/.pnpm/@shikijs+langs@3.9.2/node_modules/@shikijs/langs/dist/yaml.mjs");
    /* harmony import */
    var _shikijs_themes_github_dark_default__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__("../../node_modules/.pnpm/@shikijs+themes@3.9.2/node_modules/@shikijs/themes/dist/github-dark-default.mjs");
    /* harmony import */
    var _shikijs_themes_light_plus__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__("../../node_modules/.pnpm/@shikijs+themes@3.9.2/node_modules/@shikijs/themes/dist/light-plus.mjs");
    /* harmony import */
    var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("../../node_modules/.pnpm/react@19.1.0/node_modules/react/index.js");
    /* harmony import */
    var shiki__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__("../../node_modules/.pnpm/@shikijs+core@3.7.0/node_modules/@shikijs/core/dist/index.mjs");
    /* harmony import */
    var shiki_engine_javascript__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__("../../node_modules/.pnpm/@shikijs+engine-javascript@3.7.0/node_modules/@shikijs/engine-javascript/dist/engine-compile.mjs");
    /* harmony import */
    var _constants_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./src/constants.ts");
    /* harmony import */
    var _context_theme_context_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./src/context/theme-context.tsx");
    /* harmony import */
    var _utils_color_mixing_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("./src/utils/color-mixing.ts");
    /* harmony import */
    var _utils_diff_colors_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__("./src/utils/diff-colors.ts");
    var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_anysphere_ink__WEBPACK_IMPORTED_MODULE_1__, _context_theme_context_js__WEBPACK_IMPORTED_MODULE_5__]);
    [_anysphere_ink__WEBPACK_IMPORTED_MODULE_1__, _context_theme_context_js__WEBPACK_IMPORTED_MODULE_5__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__;
    var __rest = undefined && undefined.__rest || function (s, e) {
      var t = {};
      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];
      if (s != null && typeof Object.getOwnPropertySymbols === "function") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
        if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];
      }
      return t;
    };

    // Popular languages

    const LineComponent = ({
      lineNumber,
      showLineNumbers,
      lineNumberWidth,
      children,
      isDiff = false,
      rowBgHex,
      rowBgAnsi256Index,
      signChar,
      signColor
    }) => {
      const bgStart = typeof rowBgAnsi256Index === "number" ? `\x1b[48;5;${rowBgAnsi256Index}m` : undefined;
      const bgEnd = typeof rowBgAnsi256Index === "number" ? "\x1b[49m" : undefined;
      const useTextBackground = Boolean(rowBgHex && !bgStart);
      return (0, react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_anysphere_ink__WEBPACK_IMPORTED_MODULE_1__ /* .Box */.az, {
        flexDirection: "row",
        backgroundColor: rowBgHex,
        flexGrow: 1,
        width: "100%",
        children: [showLineNumbers && (0, react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_anysphere_ink__WEBPACK_IMPORTED_MODULE_1__ /* .Box */.az, {
          width: lineNumberWidth + 2,
          borderRight: !isDiff,
          borderLeft: false,
          borderTop: false,
          borderBottom: false,
          borderColor: "gray",
          borderStyle: "single",
          justifyContent: "flex-end",
          flexShrink: 0,
          children: (0, react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_anysphere_ink__WEBPACK_IMPORTED_MODULE_1__ /* .Text */.EY, {
            dimColor: true,
            backgroundColor: useTextBackground ? rowBgHex : undefined,
            children: [bgStart ? (0, react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_anysphere_ink__WEBPACK_IMPORTED_MODULE_1__ /* .Text */.EY, {
              children: bgStart
            }) : null, lineNumber.toString().padStart(lineNumberWidth, " "), " ", bgEnd ? (0, react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_anysphere_ink__WEBPACK_IMPORTED_MODULE_1__ /* .Text */.EY, {
              children: bgEnd
            }) : null]
          })
        }), signChar ? (0, react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_anysphere_ink__WEBPACK_IMPORTED_MODULE_1__ /* .Box */.az, {
          width: 2,
          flexShrink: 0,
          children: (0, react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_anysphere_ink__WEBPACK_IMPORTED_MODULE_1__ /* .Text */.EY, {
            backgroundColor: useTextBackground ? rowBgHex : undefined,
            children: [bgStart ? (0, react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_anysphere_ink__WEBPACK_IMPORTED_MODULE_1__ /* .Text */.EY, {
              children: bgStart
            }) : null, (0, react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_anysphere_ink__WEBPACK_IMPORTED_MODULE_1__ /* .Text */.EY, {
              color: signColor,
              bold: true,
              children: signChar
            }), " ", bgEnd ? (0, react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_anysphere_ink__WEBPACK_IMPORTED_MODULE_1__ /* .Text */.EY, {
              children: bgEnd
            }) : null]
          })
        }) : null, (0, react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_anysphere_ink__WEBPACK_IMPORTED_MODULE_1__ /* .Box */.az, {
          paddingLeft: signChar ? 0 : isDiff ? 1 : 0,
          flexShrink: 1,
          flexGrow: 1,
          children: (0, react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_anysphere_ink__WEBPACK_IMPORTED_MODULE_1__ /* .Text */.EY, {
            backgroundColor: useTextBackground ? rowBgHex : undefined,
            children: [bgStart ? (0, react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_anysphere_ink__WEBPACK_IMPORTED_MODULE_1__ /* .Text */.EY, {
              children: bgStart
            }) : null, children, bgEnd ? (0, react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_anysphere_ink__WEBPACK_IMPORTED_MODULE_1__ /* .Text */.EY, {
              children: bgEnd
            }) : null]
          })
        })]
      });
    };
    const shiki = (0, shiki__WEBPACK_IMPORTED_MODULE_8__ /* .createHighlighterCoreSync */.gX)({
      themes: [_shikijs_themes_github_dark_default__WEBPACK_IMPORTED_MODULE_9__ /* ["default"] */.A, _shikijs_themes_light_plus__WEBPACK_IMPORTED_MODULE_10__ /* ["default"] */.A],
      langs: [_shikijs_langs_javascript__WEBPACK_IMPORTED_MODULE_11__ /* ["default"] */.A, _shikijs_langs_typescript__WEBPACK_IMPORTED_MODULE_12__ /* ["default"] */.A, _shikijs_langs_tsx__WEBPACK_IMPORTED_MODULE_13__ /* ["default"] */.A, _shikijs_langs_jsx__WEBPACK_IMPORTED_MODULE_14__ /* ["default"] */.A, _shikijs_langs_json__WEBPACK_IMPORTED_MODULE_15__ /* ["default"] */.A, _shikijs_langs_html__WEBPACK_IMPORTED_MODULE_16__ /* ["default"] */.A, _shikijs_langs_css__WEBPACK_IMPORTED_MODULE_17__ /* ["default"] */.A, _shikijs_langs_scss__WEBPACK_IMPORTED_MODULE_18__ /* ["default"] */.A, _shikijs_langs_less__WEBPACK_IMPORTED_MODULE_19__ /* ["default"] */.A, _shikijs_langs_bash__WEBPACK_IMPORTED_MODULE_20__ /* ["default"] */.A, _shikijs_langs_bash__WEBPACK_IMPORTED_MODULE_20__ /* ["default"] */.A, _shikijs_langs_yaml__WEBPACK_IMPORTED_MODULE_21__ /* ["default"] */.A, _shikijs_langs_toml__WEBPACK_IMPORTED_MODULE_22__ /* ["default"] */.A, _shikijs_langs_markdown__WEBPACK_IMPORTED_MODULE_23__ /* ["default"] */.A, _shikijs_langs_go__WEBPACK_IMPORTED_MODULE_24__ /* ["default"] */.A, _shikijs_langs_rust__WEBPACK_IMPORTED_MODULE_25__ /* ["default"] */.A, _shikijs_langs_java__WEBPACK_IMPORTED_MODULE_26__ /* ["default"] */.A, _shikijs_langs_c__WEBPACK_IMPORTED_MODULE_27__ /* ["default"] */.A, _shikijs_langs_cpp__WEBPACK_IMPORTED_MODULE_28__ /* ["default"] */.A, _shikijs_langs_csharp__WEBPACK_IMPORTED_MODULE_29__ /* ["default"] */.A, _shikijs_langs_php__WEBPACK_IMPORTED_MODULE_30__ /* ["default"] */.A, _shikijs_langs_ruby__WEBPACK_IMPORTED_MODULE_31__ /* ["default"] */.A, _shikijs_langs_swift__WEBPACK_IMPORTED_MODULE_32__ /* ["default"] */.A, _shikijs_langs_kotlin__WEBPACK_IMPORTED_MODULE_33__ /* ["default"] */.A, _shikijs_langs_sql__WEBPACK_IMPORTED_MODULE_34__ /* ["default"] */.A, _shikijs_langs_r__WEBPACK_IMPORTED_MODULE_35__ /* ["default"] */.A, _shikijs_langs_dart__WEBPACK_IMPORTED_MODULE_36__ /* ["default"] */.A, _shikijs_langs_lua__WEBPACK_IMPORTED_MODULE_37__ /* ["default"] */.A, _shikijs_langs_dockerfile__WEBPACK_IMPORTED_MODULE_38__ /* ["default"] */.A, _shikijs_langs_makefile__WEBPACK_IMPORTED_MODULE_39__ /* ["default"] */.A, _shikijs_langs_xml__WEBPACK_IMPORTED_MODULE_40__ /* ["default"] */.A, _shikijs_langs_ini__WEBPACK_IMPORTED_MODULE_41__ /* ["default"] */.A, _shikijs_langs_powershell__WEBPACK_IMPORTED_MODULE_42__ /* ["default"] */.A, _shikijs_langs_python__WEBPACK_IMPORTED_MODULE_43__ /* ["default"] */.A],
      engine: (0, shiki_engine_javascript__WEBPACK_IMPORTED_MODULE_44__ /* .createJavaScriptRegexEngine */.l)()
    });
    // local cache for highlighted code blocks to avoid recomputation across remounts of Markdown
    // this is because we don't want "Static" to retry to rerender the same code blocks
    const markdownHighlightCache = new _anysphere_utils__WEBPACK_IMPORTED_MODULE_2__ /* .LRUCache */.qK({
      max: 300
    });
    const cacheKeyFor = (language, theme, content) => `${theme}::${language}::${content}`;
    /**
     * A syntax-highlighted code viewer component that displays code with optional line numbers.
     */
    const HighlightedCode = _a => {
      var {
          content,
          language,
          showLineNumbers = true,
          lineNumberWidth = 4,
          startLineNumber = 1,
          maxLines,
          isDiff = false,
          truncationHint,
          tabSize = 4,
          dimmed = false
        } = _a,
        rest = __rest(_a, ["content", "language", "showLineNumbers", "lineNumberWidth", "startLineNumber", "maxLines", "isDiff", "truncationHint", "tabSize", "dimmed"]);
      // no need for stdout; flex layout handles right-side fill
      const lines = (0, react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => content.split("\n"), [content]);
      const isLightTheme = (0, _context_theme_context_js__WEBPACK_IMPORTED_MODULE_5__ /* .useIsLightTheme */.pW)();
      const colorMode = (0, react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => (0, _utils_color_mixing_js__WEBPACK_IMPORTED_MODULE_6__ /* .getColorMode */.PT)(), []);
      const theme = (0, react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => {
        if (isLightTheme) {
          return "light-plus";
        }
        return "github-dark-default";
      }, [isLightTheme]);
      const diffRowHexes = (0, react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => {
        if (colorMode === "truecolor") {
          return isLightTheme ? _constants_js__WEBPACK_IMPORTED_MODULE_4__ /* .DIFF_ROW_TRUECOLOR_LIGHT */.iP : _constants_js__WEBPACK_IMPORTED_MODULE_4__ /* .DIFF_ROW_TRUECOLOR_DARK */.eh;
        }
        const addIdx = isLightTheme ? _constants_js__WEBPACK_IMPORTED_MODULE_4__ /* .DIFF_ROW_ANSI256_LIGHT */.Xh.add : _constants_js__WEBPACK_IMPORTED_MODULE_4__ /* .DIFF_ROW_ANSI256_DARK */.XM.add;
        const removeIdx = isLightTheme ? _constants_js__WEBPACK_IMPORTED_MODULE_4__ /* .DIFF_ROW_ANSI256_LIGHT */.Xh.remove : _constants_js__WEBPACK_IMPORTED_MODULE_4__ /* .DIFF_ROW_ANSI256_DARK */.XM.remove;
        return {
          addHex: (0, _utils_color_mixing_js__WEBPACK_IMPORTED_MODULE_6__ /* .ansi256IndexToHex */.LR)(addIdx),
          removeHex: (0, _utils_color_mixing_js__WEBPACK_IMPORTED_MODULE_6__ /* .ansi256IndexToHex */.LR)(removeIdx)
        };
      }, [colorMode, isLightTheme]);
      const diffRowAnsiIdxes = (0, react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => {
        if (colorMode !== "ansi256") return null;
        return isLightTheme ? {
          add: _constants_js__WEBPACK_IMPORTED_MODULE_4__ /* .DIFF_ROW_ANSI256_LIGHT */.Xh.add,
          remove: _constants_js__WEBPACK_IMPORTED_MODULE_4__ /* .DIFF_ROW_ANSI256_LIGHT */.Xh.remove
        } : {
          add: _constants_js__WEBPACK_IMPORTED_MODULE_4__ /* .DIFF_ROW_ANSI256_DARK */.XM.add,
          remove: _constants_js__WEBPACK_IMPORTED_MODULE_4__ /* .DIFF_ROW_ANSI256_DARK */.XM.remove
        };
      }, [colorMode, isLightTheme]);
      const diffSignHexes = (0, react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => {
        if (colorMode === "truecolor") {
          const palette = isLightTheme ? _constants_js__WEBPACK_IMPORTED_MODULE_4__ /* .DIFF_SIGN_TRUECOLOR_LIGHT */.B0 : _constants_js__WEBPACK_IMPORTED_MODULE_4__ /* .DIFF_SIGN_TRUECOLOR_DARK */.Fv;
          return palette;
        }
        const idxPalette = isLightTheme ? _constants_js__WEBPACK_IMPORTED_MODULE_4__ /* .DIFF_SIGN_ANSI256_LIGHT */.Kj : _constants_js__WEBPACK_IMPORTED_MODULE_4__ /* .DIFF_SIGN_ANSI256_DARK */.yp;
        return {
          addHex: (0, _utils_color_mixing_js__WEBPACK_IMPORTED_MODULE_6__ /* .ansi256IndexToHex */.LR)(idxPalette.add),
          removeHex: (0, _utils_color_mixing_js__WEBPACK_IMPORTED_MODULE_6__ /* .ansi256IndexToHex */.LR)(idxPalette.remove)
        };
      }, [colorMode, isLightTheme]);
      const tokens = (0, react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => {
        try {
          const cacheKey = cacheKeyFor(language, theme, content);
          const cachedTokens = markdownHighlightCache.get(cacheKey);
          if (cachedTokens) {
            return cachedTokens;
          }
          const newTokens = shiki.codeToTokens(content, {
            lang: language,
            theme
          });
          markdownHighlightCache.set(cacheKey, newTokens);
          return newTokens;
        } catch (_a) {
          // If language isn't supported/loaded, fall back to no-highlighting mode
          return null;
        }
      }, [content, language, theme]);
      // Helpers retained for potential future use; currently unused after flex-based padding
      // const stringWidth = (s: string): number => Array.from(s).length;
      // const tokensWidth = (toks: TokensResult["tokens"][0]): number =>
      //   toks.reduce((acc, t) => acc + stringWidth(t.content ?? ""), 0);
      const renderTokensForLine = (lineTokens, kind) => {
        return (0, react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {
          children: lineTokens.map((token, tokenIndex) => {
            var _a, _b, _c, _d;
            return (0, react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_anysphere_ink__WEBPACK_IMPORTED_MODULE_1__ /* .Text */.EY, {
              color: (_a = token.color) !== null && _a !== void 0 ? _a : undefined,
              backgroundColor: kind === "other" ? token.bgColor : undefined,
              italic: Boolean(((_b = token.fontStyle) !== null && _b !== void 0 ? _b : 0) & 1),
              bold: Boolean(((_c = token.fontStyle) !== null && _c !== void 0 ? _c : 0) & 2),
              underline: Boolean(((_d = token.fontStyle) !== null && _d !== void 0 ? _d : 0) & 4),
              children: token.content
            }, `${token.content}-${tokenIndex}`);
          })
        });
      };
      // Compute visible range and render once
      const totalLines = tokens ? tokens.tokens.length : lines.length;
      const shouldCap = typeof maxLines === "number" && maxLines > 0;
      const visibleCount = shouldCap ? Math.min(totalLines, maxLines) : totalLines;
      const remainingCount = totalLines - visibleCount;
      // Expand tabs to spaces honoring tab stops
      const expandTabsInText = (text, startColumn) => {
        if (!text || tabSize <= 0) return {
          text,
          endColumn: startColumn + Array.from(text).length
        };
        let column = startColumn;
        let out = "";
        for (const ch of Array.from(text)) {
          if (ch === "\t") {
            const spaces = tabSize - column % tabSize;
            out += " ".repeat(spaces === 0 ? tabSize : spaces);
            column += spaces === 0 ? tabSize : spaces;
          } else {
            out += ch;
            column += 1;
          }
        }
        return {
          text: out,
          endColumn: column
        };
      };
      const expandTabsInTokenLine = lineTokens => {
        let column = 0;
        return lineTokens.map(t => {
          var _a;
          const original = (_a = t.content) !== null && _a !== void 0 ? _a : "";
          const {
            text,
            endColumn
          } = expandTabsInText(original, column);
          column = endColumn;
          return Object.assign(Object.assign({}, t), {
            content: text
          });
        });
      };
      return (0, react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_anysphere_ink__WEBPACK_IMPORTED_MODULE_1__ /* .Box */.az, Object.assign({
        flexDirection: "column",
        width: "100%"
      }, rest, {
        children: [Array.from({
          length: visibleCount
        }, (_, index) => {
          var _a, _b, _c, _d, _e;
          const rawLine = (_a = lines[index]) !== null && _a !== void 0 ? _a : "";
          const kind = isDiff ? (0, _utils_diff_colors_js__WEBPACK_IMPORTED_MODULE_7__ /* .classifyDiffLine */.U)(rawLine) : "other";
          const bgHex = colorMode === "ansi256" ? undefined : kind === "added" ? diffRowHexes.addHex : kind === "removed" ? diffRowHexes.removeHex : undefined;
          const bgAnsiIdx = colorMode === "ansi256" ? kind === "added" ? diffRowAnsiIdxes === null || diffRowAnsiIdxes === void 0 ? void 0 : diffRowAnsiIdxes.add : kind === "removed" ? diffRowAnsiIdxes === null || diffRowAnsiIdxes === void 0 ? void 0 : diffRowAnsiIdxes.remove : undefined : undefined;
          const tokenLine = tokens ? (_b = tokens.tokens[index]) !== null && _b !== void 0 ? _b : [] : null;
          // If diff line, put the sign in its own fixed column and avoid per-token backgrounds
          let contentNode;
          let signChar;
          let signColor;
          // No need to compute precise visual width; layout is flex-based
          if (tokenLine) {
            if (kind === "added" || kind === "removed") {
              const toStrip = 1;
              let remaining = toStrip;
              const adjusted = [];
              for (const t of tokenLine) {
                if (remaining <= 0) {
                  adjusted.push(t);
                  continue;
                }
                const text = (_c = t.content) !== null && _c !== void 0 ? _c : "";
                if (text.length <= remaining) {
                  remaining -= text.length;
                  // drop token entirely
                  continue;
                }
                adjusted.push(Object.assign(Object.assign({}, t), {
                  content: text.slice(remaining)
                }));
                remaining = 0;
              }
              signChar = (_d = rawLine[0]) !== null && _d !== void 0 ? _d : "";
              signColor = kind === "added" ? diffSignHexes.addHex : diffSignHexes.removeHex;
              const expanded = expandTabsInTokenLine(adjusted);
              contentNode = (0, react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_anysphere_ink__WEBPACK_IMPORTED_MODULE_1__ /* .Text */.EY, {
                wrap: "wrap",
                dimColor: dimmed,
                children: renderTokensForLine(expanded, kind)
              });
            } else {
              const expanded = expandTabsInTokenLine(tokenLine);
              contentNode = (0, react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_anysphere_ink__WEBPACK_IMPORTED_MODULE_1__ /* .Text */.EY, {
                wrap: "wrap",
                dimColor: dimmed,
                children: renderTokensForLine(expanded, kind)
              });
            }
          } else {
            if (kind === "added" || kind === "removed") {
              signChar = (_e = rawLine[0]) !== null && _e !== void 0 ? _e : "";
              const rest = rawLine.slice(1);
              signColor = kind === "added" ? diffSignHexes.addHex : diffSignHexes.removeHex;
              contentNode = (0, react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_anysphere_ink__WEBPACK_IMPORTED_MODULE_1__ /* .Text */.EY, {
                wrap: "wrap",
                dimColor: dimmed,
                children: (0, react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_anysphere_ink__WEBPACK_IMPORTED_MODULE_1__ /* .Text */.EY, {
                  children: expandTabsInText(rest, 0).text
                })
              });
            } else {
              contentNode = (0, react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_anysphere_ink__WEBPACK_IMPORTED_MODULE_1__ /* .Text */.EY, {
                wrap: "wrap",
                dimColor: dimmed,
                children: expandTabsInText(rawLine, 0).text
              });
            }
          }
          // Flex filler handles right-side extension; no explicit padding needed
          const lineNumber = startLineNumber + index;
          return (0, react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(LineComponent, {
            lineNumber: lineNumber,
            showLineNumbers: showLineNumbers,
            lineNumberWidth: lineNumberWidth,
            isDiff: isDiff,
            rowBgHex: bgHex,
            rowBgAnsi256Index: bgAnsiIdx,
            signChar: signChar,
            signColor: signColor,
            children: contentNode
          }, lineNumber);
        }), remainingCount > 0 && (0, react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(LineComponent, {
          lineNumber: startLineNumber + visibleCount,
          showLineNumbers: showLineNumbers,
          lineNumberWidth: lineNumberWidth,
          isDiff: isDiff,
          children: (0, react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_anysphere_ink__WEBPACK_IMPORTED_MODULE_1__ /* .Text */.EY, {
            dimColor: true,
            children: ["\u2026 truncated (", remainingCount, " more line", remainingCount === 1 ? "" : "s", ")", truncationHint ? (0, react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_anysphere_ink__WEBPACK_IMPORTED_MODULE_1__ /* .Text */.EY, {
              children: [" \u00B7 ", truncationHint]
            }) : null]
          })
        })]
      }));
    };
    /* harmony default export */
    const __WEBPACK_DEFAULT_EXPORT__ = HighlightedCode;
    __webpack_async_result__();
  } catch (e) {
    __webpack_async_result__(e);
  }
});

/***/